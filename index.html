<!DOCTYPE html>
<html lang="pt-BR" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All In Car Service - Est√©tica Automotiva de Alto Padr√£o</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&family=Roboto:wght@400;500&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #f8f9fa;
        }
        h1, h2, h3, .font-montserrat {
            font-family: 'Montserrat', sans-serif;
        }
        .nav-link {
            transition: color 0.3s, border-bottom-color 0.3s;
            border-bottom: 2px solid transparent;
        }
        .nav-link:hover, .nav-link.active {
            color: #007BFF;
            border-bottom-color: #007BFF;
        }
        .service-card {
            transition: transform 0.3s, box-shadow 0.3s;
        }
        .service-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .film-button {
            transition: background-color 0.3s, color 0.3s;
        }
        .film-button.active {
            background-color: #007BFF;
            color: white;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 300px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 350px;
            }
        }
        .spinner {
            border: 4px solid rgba(0, 0, 0, 0.1);
            border-left-color: #007BFF;
            border-radius: 50%;
            width: 24px;
            height: 24px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <header class="bg-white shadow-md sticky top-0 z-50">
        <nav class="container mx-auto px-6 py-3">
            <div class="flex justify-between items-center">
                <a href="#" class="text-2xl font-bold text-gray-800 font-montserrat">All In <span class="text-blue-600">Car Service</span></a>
                <div class="hidden md:flex items-center space-x-6">
                    <a href="#servicos" class="nav-link pb-1">Servi√ßos</a>
                    <a href="#peliculas" class="nav-link pb-1">Pel√≠culas</a>
                    <a href="#vitrificacao" class="nav-link pb-1">Vitrifica√ß√£o</a>
                    <a href="#ppf" class="nav-link pb-1">PPF</a>
                    <a href="#pacotes-personalizados" class="nav-link pb-1">Pacotes Personalizados ‚ú®</a>
                    <a href="#contato" class="nav-link pb-1">Contato</a>
                </div>
                <div class="md:hidden">
                    <button id="mobile-menu-button" class="text-gray-800 focus:outline-none">
                        <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                    </button>
                </div>
            </div>
            <div id="mobile-menu" class="hidden md:hidden mt-4">
                <a href="#servicos" class="block py-2 px-4 text-sm hover:bg-gray-200 rounded">Servi√ßos</a>
                <a href="#peliculas" class="block py-2 px-4 text-sm hover:bg-gray-200 rounded">Pel√≠culas</a>
                <a href="#vitrificacao" class="block py-2 px-4 text-sm hover:bg-gray-200 rounded">Vitrifica√ß√£o</a>
                <a href="#ppf" class="block py-2 px-4 text-sm hover:bg-gray-200 rounded">PPF</a>
                <a href="#pacotes-personalizados" class="block py-2 px-4 text-sm hover:bg-gray-200 rounded">Pacotes Personalizados ‚ú®</a>
                <a href="#contato" class="block py-2 px-4 text-sm hover:bg-gray-200 rounded">Contato</a>
            </div>
        </nav>
    </header>

    <main>
        <section id="hero" class="bg-gray-900 text-white text-center py-20 px-6" style="background-image: url('https://images.unsplash.com/photo-1617083999123-2d1a2a47e3a3?q=80&w=1920&auto=format&fit=crop'); background-size: cover; background-position: center;">
            <div class="bg-black bg-opacity-50 rounded-lg p-8 max-w-4xl mx-auto">
                <h1 class="text-4xl md:text-6xl font-bold mb-4 font-montserrat">Est√©tica Automotiva de Alto Padr√£o</h1>
                <p class="text-lg md:text-xl mb-8 text-gray-300">Transformando ve√≠culos, superando expectativas. Qualidade que voc√™ v√™ e sente.</p>
                <a href="https://wa.me/5571999245513?text=Ol%C3%A1!%20Visitei%20o%20site%20da%20All%20In%20Car%20Service%20e%20gostaria%20de%20mais%20informa%C3%A7%C3%B5es." target="_blank" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300">Agende seu Servi√ßo</a>
            </div>
        </section>

        <section id="servicos" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-4 font-montserrat">Servi√ßos de Est√©tica</h2>
                <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">Oferecemos uma gama completa de servi√ßos para cuidar de cada detalhe do seu ve√≠culo. Nossos processos utilizam os melhores produtos e t√©cnicas para garantir um resultado impec√°vel, restaurando e protegendo seu patrim√¥nio.</p>
                <div id="servicos-container" class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                </div>
            </div>
        </section>

        <section id="peliculas" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-4 font-montserrat">Pel√≠culas de Prote√ß√£o Solar</h2>
                <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">Nossas pel√≠culas de alta performance oferecem o equil√≠brio perfeito entre conforto t√©rmico, prote√ß√£o solar, seguran√ßa e estilo. Explore nossas linhas para encontrar a solu√ß√£o ideal para voc√™ e seu ve√≠culo.</p>
                <div class="flex flex-wrap justify-center gap-2 md:gap-4 mb-12">
                </div>
                <div class="grid lg:grid-cols-2 gap-12 items-center">
                    <div id="film-details" class="bg-gray-50 p-8 rounded-lg shadow-inner">
                    </div>
                    <div class="chart-container">
                        <canvas id="filmChart"></canvas>
                    </div>
                </div>
            </div>
        </section>

        <section id="vitrificacao" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-4 font-montserrat">Vitrifica√ß√£o Cer√¢mica</h2>
                 <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">A vitrifica√ß√£o cria uma barreira de prote√ß√£o ultra resistente sobre as superf√≠cies do ve√≠culo. Este tratamento de alta tecnologia n√£o s√≥ proporciona um brilho intenso e profundo, como tamb√©m protege contra micro-riscos, raios UV e agentes qu√≠micos.</p>
                <div id="vitrificacao-container" class="grid md:grid-cols-2 lg:grid-cols-4 gap-8">
                </div>
            </div>
        </section>

        <section id="ppf" class="py-20 bg-white">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-4 font-montserrat">PPF - Pel√≠cula de Prote√ß√£o de Pintura</h2>
                <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">O PPF √© a defesa definitiva para a pintura do seu carro. Esta pel√≠cula de poliuretano, praticamente invis√≠vel, absorve impactos de pedras, previne riscos, manchas e outros danos, preservando a originalidade e o valor do seu ve√≠culo.</p>
                <div id="ppf-container" class="grid md:grid-cols-3 gap-8 max-w-5xl mx-auto">
                </div>
            </div>
        </section>

        <section id="pacotes-personalizados" class="py-20">
            <div class="container mx-auto px-6">
                <h2 class="text-4xl font-bold text-center mb-4 font-montserrat">Monte Seu Pacote Personalizado ‚ú®</h2>
                <p class="text-center text-gray-600 mb-12 max-w-3xl mx-auto">Selecione os servi√ßos que voc√™ mais deseja e deixe que nossa intelig√™ncia artificial crie uma descri√ß√£o exclusiva, destacando os benef√≠cios combinados para o seu ve√≠culo. A experi√™ncia All In Car Service, agora sob medida para voc√™!</p>
                
                <div class="bg-white p-8 rounded-lg shadow-lg mb-12">
                    <h3 class="text-2xl font-bold mb-4 font-montserrat">Servi√ßos Selecionados:</h3>
                    <div id="selected-services-list" class="flex flex-wrap gap-2 mb-4 border-b pb-4">
                        <p class="text-gray-500 italic" id="empty-selection-message">Nenhum servi√ßo selecionado ainda. Clique em "Adicionar ao Pacote ‚ú®" nos cart√µes de servi√ßo.</p>
                    </div>
                    
                    <div class="text-right font-bold text-2xl mt-4 font-montserrat" id="package-total-price">
                        </div>
                    
                    <div class="flex flex-col md:flex-row justify-center items-center gap-4 mt-6">
                        <button id="generate-package-btn" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-8 rounded-full text-lg transition duration-300 flex items-center justify-center">
                            Gerar Descri√ß√£o do Pacote ‚ú®
                            <div id="spinner" class="spinner ml-3 hidden"></div>
                        </button>
                        <button id="clear-package-btn" class="bg-gray-300 hover:bg-gray-400 text-gray-800 font-bold py-3 px-8 rounded-full text-lg transition duration-300">
                            Limpar Sele√ß√£o
                        </button>
                    </div>
                </div>

                <div id="package-description-output" class="bg-blue-50 p-8 rounded-lg shadow-inner hidden">
                    <h3 class="text-2xl font-bold mb-4 text-blue-800 font-montserrat">Sua Descri√ß√£o de Pacote Personalizada:</h3>
                    <p id="generated-description" class="text-gray-800 leading-relaxed"></p>
                </div>
            </div>
        </section>

        <section id="contato" class="py-20 bg-gray-800 text-white">
            <div class="container mx-auto px-6">
                <div class="text-center">
                    <h2 class="text-4xl font-bold mb-4 font-montserrat">Entre em Contato</h2>
                    <p class="text-gray-300 mb-10">Estamos prontos para atender voc√™. Agende seu hor√°rio e venha nos conhecer.</p>
                </div>
                <div class="max-w-4xl mx-auto bg-gray-900 rounded-lg p-8 grid md:grid-cols-2 gap-8 text-center md:text-left">
                    <div class="space-y-4">
                        <h3 class="text-2xl font-bold font-montserrat">All In Car Service</h3>
                        <p><span>üìç</span> <a href="https://g.co/kgs/haXVUnX" target="_blank" class="text-blue-400 hover:text-blue-500 hover:underline">Pra√ßa do Barbalho, 70 ‚Äì Salvador/BA</a></p>
                        <p><span>üìû</span> (71) 99924-5513</p>
                        <p><span>üìß</span> studiodkssa@gmail.com</p>
                        <p><span>üì±</span> Instagram: <a href="#" class="text-blue-400 hover:text-blue-500">@allincarservice</a></p>
                    </div>
                    <div class="space-y-4">
                        <h3 class="text-2xl font-bold font-montserrat">Hor√°rio de Atendimento</h3>
                        <p><span>üïí</span> Segunda a sexta: 9h √†s 18h</p>
                        <p><span>üïí</span> S√°bado: 10h √†s 16h</p>
                        <p class="mt-4 pt-4 border-t border-gray-700"><span>‚ö†Ô∏è</span> Atendimento somente com agendamento pr√©vio.</p>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-900 text-white text-center py-6">
        <p>&copy; 2025 All In Car Service. Todos os direitos reservados.</p>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const data = {
                servicos: [
                    { id: 'lavagem-tecnica', title: "Lavagem T√©cnica Detalhada", desc: "Lavagem com shampoo neutro, luvas de microfibra, limpeza de rodas e secagem t√©cnica.", price: 120, type: "servico" },
                    { id: 'descontaminacao', title: "Lavagem de Descontamina√ß√£o", desc: "Remove piche, respingos de tinta, cola e outras impurezas da pintura.", price: 280, type: "servico" },
                    { id: 'polimento-tecnico', title: "Polimento T√©cnico", desc: "Corre√ß√£o de micro-riscos e opacidade, devolvendo o brilho da pintura.", price: 750, type: "servico" },
                    { id: 'coating-pintura', title: "Coating de Pintura e Materiais", desc: "Aplica√ß√£o de prote√ß√£o cer√¢mica de longa dura√ß√£o em pintura, rodas, couro e pl√°sticos.", price: 1800, type: "servico" },
                    { id: 'higienizacao-interna', title: "Higieniza√ß√£o Interna Completa", desc: "Limpeza detalhada de bancos, carpetes e tetos, com uso de produtos bactericidas.", price: 450, type: "servico" },
                    { id: 'lavagem-motor', title: "Lavagem de Motor", desc: "Limpeza t√©cnica do motor com seguran√ßa para os componentes el√©tricos.", price: 300, type: "servico" },
                ],
                peliculas: [
                    { 
                        id: 'blue', name: "Window Blue", icon: 'üî∑', tagline: "Prote√ß√£o invis√≠vel com tecnologia de √∫ltima gera√ß√£o.", 
                        desc: "Pel√≠cula quase transparente, com leve tonalidade azulada, ideal para quem deseja prote√ß√£o t√©rmica e solar sem escurecer os vidros.",
                        indicacao: "Indicada para ve√≠culos de alto padr√£o ou clientes que priorizam discri√ß√£o e tecnologia invis√≠vel.",
                        specs: { calor: 89, uv: 99, vlt: 76, garantia: 'vital√≠cia'},
                        prices: { laterais: 1300, parabrisa: 900, completo: 2000 }
                    },
                    { 
                        id: 'premium', name: "Window Premium", icon: 'üî∏', tagline: "Alta prote√ß√£o t√©rmica com visual sofisticado.", 
                        desc: "Pel√≠cula nanocer√¢mica com excelente equil√≠brio entre desempenho e est√©tica. Indicada para quem deseja conforto t√©rmico sem abrir m√£o de um visual moderno e leve.",
                        indicacao: "Dispon√≠vel em diversas tonalidades (G5 a G50).",
                        specs: { calor: 90, uv: 99, vlt: "Vari√°vel", garantia: 'vital√≠cia'},
                        prices: { laterais: 800, parabrisa: 500, completo: 1200 }
                    },
                    { 
                        id: 'protection', name: "Premium Total Protection", icon: 'üî∂', tagline: "O m√°ximo em prote√ß√£o t√©rmica, solar e f√≠sica.", 
                        desc: "Essa vers√£o acrescenta camada antivandalismo, ideal para motoristas que desejam o mais alto n√≠vel de seguran√ßa contra estilha√ßos em caso de colis√£o ou tentativa de furto.",
                        indicacao: "Mant√©m fragmentos em caso de impacto, aumentando a seguran√ßa.",
                        specs: { calor: 90, uv: 99, vlt: "Vari√°vel", garantia: 'vital√≠cia'},
                        prices: { laterais: 1050, parabrisa: 700, completo: 1600 }
                    },
                    { 
                        id: 'carbono', name: "Window Carbono", icon: 'üü•', tagline: "Estilo esportivo e alta durabilidade.", 
                        desc: "Pel√≠cula desenvolvida com part√≠culas de nano carbono, oferece est√©tica fum√™ escura com desempenho t√©rmico razo√°vel e excelente estabilidade de cor. Ideal para quem busca visual marcante com √≥timo custo-benef√≠cio.",
                        indicacao: "Alta resist√™ncia ao desbotamento e bolhas.",
                        specs: { calor: 75, uv: 99, vlt: "Vari√°vel", garantia: '10+ anos'},
                        prices: { laterais: 450, parabrisa: 300, completo: 600 }
                    },
                ],
                vitrificacao: [
                    { id: 'vit-pintura', title: "Vitrifica√ß√£o de Pintura", desc: "Prote√ß√£o premium por 1, 3 ou 5 anos. Inclui lavagem, descontamina√ß√£o e polimento t√©cnico.", price: 1800, durabilidade: "At√© 5 anos", type: "vitrificacao" },
                    { id: 'vit-rodas', title: "Vitrifica√ß√£o de Rodas", desc: "Coating resistente ao calor e sujeira de freio.", price: 500, durabilidade: "12 a 18 meses", type: "vitrificacao" },
                    { id: 'vit-couro', title: "Vitrifica√ß√£o de Couro", desc: "Limpeza, hidrata√ß√£o e selante cer√¢mico impermeabilizante.", price: 450, durabilidade: "6 a 12 meses", type: "vitrificacao" },
                    { id: 'vit-plasticos', title: "Vitrifica√ß√£o de Pl√°sticos", desc: "Restaura e protege contra raios UV, desbotamento e ressecamento.", price: 400, durabilidade: "At√© 2 anos", type: "vitrificacao" },
                ],
                ppf: [
                    { id: 'ppf-full', title: "Full Protection", desc: "Prote√ß√£o completa para o ve√≠culo inteiro.", price: 18000, type: "ppf" },
                    { id: 'ppf-frontal', title: "Prote√ß√£o Frontal", desc: "Cap√¥, para-choques e retrovisores.", price: 7000, type: "ppf" },
                    { id: 'ppf-parcial', title: "Prote√ß√£o Parcial", desc: "Soleiras, ma√ßanetas, cantos de porta.", price: 2000, type: "ppf" },
                ]
            };

            const allServices = [
                ...data.servicos,
                ...data.vitrificacao,
                ...data.ppf
            ];

            let selectedPackageServices = [];

            const servicosContainer = document.getElementById('servicos-container');
            const vitrificacaoContainer = document.getElementById('vitrificacao-container');
            const ppfContainer = document.getElementById('ppf-container');

            function renderServiceCards(container, services, showAddButton = false) {
                services.forEach(servico => {
                    const card = document.createElement('div');
                    card.className = 'service-card bg-white p-8 rounded-lg shadow-lg text-center flex flex-col justify-between';
                    let priceDisplay = `<p class="text-2xl font-bold text-blue-600">A partir de R$ ${servico.price.toFixed(2)}</p>`;
                    if (servico.durabilidade) {
                        priceDisplay += `<p class="text-sm text-gray-500 mt-1">Durabilidade: ${servico.durabilidade}</p>`;
                    }
                    card.innerHTML = `
                        <h3 class="text-2xl font-bold mb-4 font-montserrat">${servico.title}</h3>
                        <p class="text-gray-600 mb-4 min-h-[4rem] flex-grow">${servico.desc}</p>
                        ${priceDisplay}
                        ${showAddButton ? `<button data-service-id="${servico.id}" class="add-to-package-btn mt-4 bg-blue-500 hover:bg-blue-600 text-white font-bold py-2 px-4 rounded-full transition duration-300">Adicionar ao Pacote ‚ú®</button>` : ''}
                    `;
                    container.appendChild(card);
                });
            }

            renderServiceCards(servicosContainer, data.servicos, true);
            renderServiceCards(vitrificacaoContainer, data.vitrificacao, true);
            renderServiceCards(ppfContainer, data.ppf, true);

            const selectedServicesList = document.getElementById('selected-services-list');
            const emptySelectionMessage = document.getElementById('empty-selection-message');
            const generatePackageBtn = document.getElementById('generate-package-btn');
            const clearPackageBtn = document.getElementById('clear-package-btn');
            const packageDescriptionOutput = document.getElementById('package-description-output');
            const generatedDescription = document.getElementById('generated-description');
            const spinner = document.getElementById('spinner');
            const packageTotalPriceElement = document.getElementById('package-total-price');

            function updateSelectedServicesList() {
                selectedServicesList.innerHTML = '';
                if (selectedPackageServices.length === 0) {
                    emptySelectionMessage.classList.remove('hidden');
                    selectedServicesList.appendChild(emptySelectionMessage);
                } else {
                    emptySelectionMessage.classList.add('hidden');
                    selectedPackageServices.forEach(service => {
                        const tag = document.createElement('span');
                        tag.className = 'bg-blue-100 text-blue-800 text-sm font-semibold mr-2 px-2.5 py-0.5 rounded-full flex items-center';
                        tag.innerHTML = `${service.title} <button data-service-id="${service.id}" class="remove-service-btn ml-2 text-blue-600 hover:text-blue-900">x</button>`;
                        selectedServicesList.appendChild(tag);
                    });
                }
                
                const totalPrice = selectedPackageServices.reduce((total, service) => total + service.price, 0);
                
                if (totalPrice > 0) {
                    packageTotalPriceElement.textContent = `Total do Pacote: R$ ${totalPrice.toFixed(2).replace('.', ',')}`;
                } else {
                    packageTotalPriceElement.textContent = '';
                }
            }

            document.querySelectorAll('.add-to-package-btn').forEach(button => {
                button.addEventListener('click', (event) => {
                    const serviceId = event.target.dataset.serviceId;
                    const service = allServices.find(s => s.id === serviceId);
                    if (service && !selectedPackageServices.some(s => s.id === serviceId)) {
                        selectedPackageServices.push(service);
                        updateSelectedServicesList();
                    }
                });
            });

            selectedServicesList.addEventListener('click', (event) => {
                if (event.target.classList.contains('remove-service-btn')) {
                    const serviceIdToRemove = event.target.dataset.serviceId;
                    selectedPackageServices = selectedPackageServices.filter(s => s.id !== serviceIdToRemove);
                    updateSelectedServicesList();
                }
            });

            clearPackageBtn.addEventListener('click', () => {
                selectedPackageServices = [];
                updateSelectedServicesList();
                packageDescriptionOutput.classList.add('hidden');
                generatedDescription.textContent = '';
            });

            generatePackageBtn.addEventListener('click', async () => {
                if (selectedPackageServices.length === 0) {
                    generatedDescription.textContent = "Por favor, selecione pelo menos um servi√ßo para gerar a descri√ß√£o do pacote.";
                    packageDescriptionOutput.classList.remove('hidden');
                    return;
                }

                spinner.classList.remove('hidden');
                generatePackageBtn.disabled = true;
                generatedDescription.textContent = '';
                packageDescriptionOutput.classList.remove('hidden');

                const serviceTitles = selectedPackageServices.map(s => s.title).join(', ');
                const prompt = `Gere uma descri√ß√£o atraente e premium para um pacote de est√©tica automotiva que inclui os seguintes servi√ßos: ${serviceTitles}. Destaque os benef√≠cios combinados e a qualidade superior da All In Car Service. Seja conciso e persuasivo, usando no m√°ximo 150 palavras.`;

                try {
                    let chatHistory = [];
                    chatHistory.push({ role: "user", parts: [{ text: prompt }] });
                    const payload = { contents: chatHistory };
                    
                    const apiKey = "AIzaSyDg9jeQuPGY_W033dKr_WYk4xyZevcPQVk"; 

                    if (!apiKey) {
                        throw new Error("A chave da API do Gemini n√£o foi configurada.");
                    }

                    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${apiKey}`;
                    
                    const response = await fetch(apiUrl, {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(payload)
                            });
                    const result = await response.json();

                    if (result.candidates && result.candidates.length > 0) {
                        const text = result.candidates[0].content.parts[0].text;
                        generatedDescription.textContent = text;
                    } else if (result.error) {
                         generatedDescription.textContent = `Erro da API: ${result.error.message}. Verifique sua chave de API e as configura√ß√µes da conta.`;
                    }
                    else {
                        generatedDescription.textContent = "N√£o foi poss√≠vel gerar a descri√ß√£o. A resposta da API estava vazia. Tente novamente.";
                    }
                } catch (error) {
                    console.error("Erro ao chamar a API Gemini:", error);
                    generatedDescription.textContent = `Ocorreu um erro ao gerar a descri√ß√£o: ${error.message}. Verifique o console para mais detalhes.`;
                } finally {
                    spinner.classList.add('hidden');
                    generatePackageBtn.disabled = false;
                }
            });

            updateSelectedServicesList();

            const filmButtonsContainer = document.querySelector('#peliculas .flex');
            const filmDetailsContainer = document.getElementById('film-details');
            let filmChart;

            function updateFilmDetails(filmId) {
                const film = data.peliculas.find(f => f.id === filmId);
                filmDetailsContainer.innerHTML = `
                    <h3 class="text-3xl font-bold mb-2 font-montserrat">${film.icon} ${film.name}</h3>
                    <p class="text-lg text-blue-600 font-semibold mb-4">${film.tagline}</p>
                    <p class="text-gray-700 mb-4">${film.desc}</p>
                    <p class="text-gray-600 bg-blue-50 p-3 rounded-md mb-6">üí° ${film.indicacao}</p>
                    <div class="space-y-2">
                        <h4 class="text-xl font-semibold mb-2 font-montserrat">Detalhes T√©cnicos:</h4>
                        <p class="flex justify-between"><span>Redu√ß√£o de Calor:</span> <span class="font-bold">${film.specs.calor}%</span></p>
                        <p class="flex justify-between"><span>Bloqueio de Raios UV:</span> <span class="font-bold">${film.specs.uv}%</span></p>
                        <p class="flex justify-between"><span>Transmiss√£o de Luz Vis√≠vel:</span> <span class="font-bold">${film.specs.vlt}${typeof film.specs.vlt === 'number' ? '%' : ''}</span></p>
                        <p class="flex justify-between"><span>Garantia:</span> <span class="font-bold capitalize">${film.specs.garantia}</span></p>
                    </div>
                     <div class="mt-6 pt-4 border-t">
                        <h4 class="text-xl font-semibold mb-2 font-montserrat">Valores:</h4>
                        <p class="flex justify-between"><span>Laterais + Traseira:</span> <span class="font-bold">R$ ${film.prices.laterais.toFixed(2).replace('.', ',')}</span></p>
                        <p class="flex justify-between"><span>Para-brisa:</span> <span class="font-bold">R$ ${film.prices.parabrisa.toFixed(2).replace('.', ',')}</span></p>
                        <p class="flex justify-between text-blue-600"><span>Combo Completo:</span> <span class="font-bold">R$ ${film.prices.completo.toFixed(2).replace('.', ',')}</span></p>
                    </div>
                `;
                
                document.querySelectorAll('.film-button').forEach(btn => {
                    btn.classList.toggle('active', btn.dataset.filmid === filmId);
                });

                updateChartHighlight(filmId);
            }

            function updateChartHighlight(filmId) {
                const filmIndex = data.peliculas.findIndex(f => f.id === filmId);
                filmChart.data.datasets[0].backgroundColor = data.peliculas.map((_, index) => index === filmIndex ? '#007BFF' : '#D1D5DB');
                filmChart.update();
            }

            const chartCtx = document.getElementById('filmChart').getContext('2d');
            filmChart = new Chart(chartCtx, {
                type: 'bar',
                data: {
                    labels: data.peliculas.map(f => f.name),
                    datasets: [{
                        label: 'Redu√ß√£o de Calor (%)',
                        data: data.peliculas.map(f => f.specs.calor),
                        backgroundColor: '#D1D5DB',
                        borderColor: '#9CA3AF',
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            beginAtZero: true,
                            max: 100,
                            title: {
                                display: true,
                                text: 'Efici√™ncia (%)'
                            }
                        },
                        y: {
                            ticks: {
                                callback: function(value, index, values) {
                                    const label = this.getLabelForValue(value);
                                    return label.length > 16 ? label.substring(0, 16) + '...' : label;
                                }
                            }
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return ` Redu√ß√£o de Calor: ${context.raw}%`;
                                }
                            }
                        }
                    }
                }
            });

            data.peliculas.forEach(film => {
                const button = document.createElement('button');
                button.className = 'film-button py-2 px-4 rounded-full border-2 border-gray-300 hover:bg-gray-200';
                button.textContent = film.name;
                button.dataset.filmid = film.id;
                button.addEventListener('click', () => updateFilmDetails(film.id));
                filmButtonsContainer.appendChild(button);
            });
            updateFilmDetails(data.peliculas[0].id);

            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            mobileMenuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            
            const navLinks = document.querySelectorAll('.nav-link');
            const sections = document.querySelectorAll('main section');

            window.addEventListener('scroll', () => {
                let current = '';
                sections.forEach(section => {
                    const sectionTop = section.offsetTop;
                    if (pageYOffset >= sectionTop - 60) {
                        current = section.getAttribute('id');
                    }
                });

                navLinks.forEach(link => {
                    link.classList.remove('active');
                    if (link.getAttribute('href').substring(1) === current) {
                        link.classList.add('active');
                    }
                });
            });
        });
    </script>
</body>
</html>
